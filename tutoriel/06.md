# Communications LoRa :: Tutoriel sur RIOT et LoRa/LoRaWAN avec la carte Wyres Base

[Précédent](05.md) | [Top](README.md) |  [Suivant](07.md)

Dans ce chapitre, vous apprendrez à transmettre et recevoir des informations en utilisant directement le pilote des transceivers LoRa SX1272 de 2 (ou plus) cartes Wyres Base (la votre et celles de vos voisins).

## Rappel

> Configurez la carte cible pour `make`
```bash
export BOARD=wyres-base
export EXTERNAL_BOARD_DIRS=~/github/campusiot/RIOT-wyres/boards
```

## Communication point-à-point (P2P) avec LoRa

```bash
cd ~/github/campusiot/RIOT-wyres/tests/driver_sx127x
make -j 16 flash
```

<details>
<summary>Console</summary>
<pre>
> help
> init
1
 8006988
 8003295
*** RIOT kernel panic:
HARD FAULT HANDLER

*** rebooting...

main(): This is RIOT! (Version: 2023.07-devel-325-g2863d)
Initialization successful - starting the shell now
</pre>
</details>

> Exercice: que constatez-vous ?

## LoRaChat

Utilisez le programme précédent pour élaborer un chat en LoRa.

Il suffit pour cela d'établir une convention de rédaction des messages.

Par exemple:
* `123@*:11:Qui est la?` : signifie de la part de `123` pour tout le monde (`*`) (message #`12`), Qui est la ? --> doit entrainer une réponse des récepteurs.
* `123@*:12:Salut à tous` : signifie de la part de `123` pour tout le monde (`*`) (message #12)
* `123@456:13:Salut au groupe 456` : signifie de la part de `123` pour `456` (message #`13`)
* `123@12*:14:RDV 868100000 SF7BW125` : signifie de la part de `123` pour les groupes dont le numéro commence par  `12*` (message #`14`), RdV sur le canal `868.1` MHz en `SF7` et `BW125`)

> Observez-vous des pertes de messages à partir des numéros de messages ?

> Quels sont les risques de sécurité d'un tel protocole de chat ?

## Observation depuis les stations

Ouvrez la console Web d'une des stations de l'organisation pour observer les échanges sur les canaux 868.1 MHz, 868.3 MHz, 868.5 MHz, 867.1 MHz, 867.3 MHz, 867.5 MHz, 867.7 MHz, 867.9 MHz  (SF7 à SF12 et BW125).

Observez-vous dans la console Web des gateways, les échanges sur les canaux 868.0 MHz, 868.2 MHz, 868.4 MHz, 867.0 MHz, 867.2 MHz ...  (SF7 à SF12 et BW125, BW250 et BW500) ?