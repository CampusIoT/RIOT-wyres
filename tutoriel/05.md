# Pilotage des capteurs MEMS :: Tutoriel sur RIOT et LoRa/LoRaWAN avec la carte Wyres Base

[Précédent](04.md) | [Top](README.md) |  [Suivant](05.md)

Dans ce chapitre, vous apprendrez à ...

> Configurez la carte cible pour `make`
```bash
export BOARD=wyres-base
export EXTERNAL_BOARD_DIRS=~/github/campusiot/RIOT-wyres/boards
```


## Capteurs I2C Pression atmosphérique interne (builtin) LPS22HB
cd ~/github/RIOT-OS/RIOT/tests/drivers/lpsxxx/
BOARD=wyres-base EXTERNAL_BOARD_DIRS=~/github/campusiot/RIOT-wyres/boards DRIVER=lps22hb gmake -j 16

main(): This is RIOT! (Version: 2023.07-devel-325-g2863d)
Test application for lps22hb pressure sensor

Initializing lps22hb sensor
Pressure value: 995hPa - Temperature: 21.21°C
Pressure value: 995hPa - Temperature: 21.20°C
Pressure value: 995hPa - Temperature: 21.20°C
Pressure value: 995hPa - Temperature: 21.20°C
Pressure value: 995hPa - Temperature: 21.20°C

Capteurs I2C Grove
## BME280 → drivers/bmx280

cd ~/github/RIOT-OS/RIOT/tests/drivers/bmx280/
BOARD=wyres-base EXTERNAL_BOARD_DIRS=~/github/campusiot/RIOT-wyres/boards gmake -j 16
## GY-68 & BMP180 → drivers/bmp180 ?

cd ~/github/RIOT-OS/RIOT/tests/drivers/bmp180/
BOARD=wyres-base EXTERNAL_BOARD_DIRS=~/github/campusiot/RIOT-wyres/boards gmake -j 16

## mpl3115a2
cd ~/github/RIOT-OS/RIOT/tests/drivers/mpl3115a2/
BOARD=wyres-base EXTERNAL_BOARD_DIRS=~/github/campusiot/RIOT-wyres/boards gmake -j 16

## mag3110
cd ~/github/RIOT-OS/RIOT/tests/drivers/mag3110/
BOARD=wyres-base EXTERNAL_BOARD_DIRS=~/github/campusiot/RIOT-wyres/boards gmake -j 16

## mma7361
cd ~/github/RIOT-OS/RIOT/tests/drivers/mma7660/
BOARD=wyres-base EXTERNAL_BOARD_DIRS=~/github/campusiot/RIOT-wyres/boards gmake -j 16

Bonus → drivers RIOT à porter et à contribuer
GY-521 MPU-6050 Gyroscope 3 axes et accéléromètre → mpu9x50 ?BMP085 Digital Pressure Sensor Module (GY-65)
mpl115a2 https://www.nxp.com/docs/en/data-sheet/MPL115A2.pdf 





## SAUL
cd ~/github/campusiot/RIOT-wyres/tests/saul

>>> main(): This is RIOT! (Version: 2023.07-devel-325-g2863d)
SAUL test application

Dev: lps22hb    Type: SENSE_PRESS
Data:            	995 hPa

Dev: lps22hb    Type: SENSE_TEMP
Data:          	20.97 °C

##########################

Dev: lps22hb    Type: SENSE_PRESS
Data:            	995 hPa

Dev: lps22hb    Type: SENSE_TEMP
Data:          	20.97 °C


saul_drivers (la totale !)
cd ~/github/campusiot/RIOT-wyres/tests/saul_drivers

/Users/donsez/github/RIOT-OS/RIOT/drivers/saul/init_devs/auto_init_io1_xplained.c:75:29: error: 'io1_xplained_saul_gpios' undeclared (first use in this function); did you mean 'io1_xplained_saul_info'?
   75 |          	j < ARRAY_SIZE(io1_xplained_saul_gpios);
  	|                         	^~~~~~~~~~~~~~~~~~~~~~~
/Users/donsez/github/RIOT-OS/RIOT/core/lib/include/container.h:83:32: note: in definition of macro 'ARRAY_SIZE'
   83 | #define ARRAY_SIZE(a) (sizeof((a)) / sizeof((a)[0]))
  	|                            	^
/Users/donsez/github/RIOT-OS/RIOT/drivers/saul/init_devs/auto_init_io1_xplained.c:75:29: note: each undeclared identifier is reported only once for each function it appears in
   75 |          	j < ARRAY_SIZE(io1_xplained_saul_gpios);
  	|                         	^~~~~~~~~~~~~~~~~~~~~~~
/Users/donsez/github/RIOT-OS/RIOT/core/lib/include/container.h:83:32: note: in definition of macro 'ARRAY_SIZE'
   83 | #define ARRAY_SIZE(a) (sizeof((a)) / sizeof((a)[0]))




## Contributions à RIOT



Accéléromètre lis2de12 (builtin) → portage requis
http://www.emcu.eu/wp-content/uploads/2016/11/ST-SensorsOverviewMM201705.pdf#page=5 

cd ~/github/RIOT-OS/RIOT/tests/drivers/lis2dh12/
BOARD=wyres-base EXTERNAL_BOARD_DIRS=~/github/campusiot/RIOT-wyres/boards DRIVER=lis2dh12_i2c gmake -j 16

main(): This is RIOT! (Version: 2023.07-devel-325-g2863d)
using SPI mode, for I2C mode select the lis2dh12_i2c module
lis2dh12 [Failed]
8001603
main(): This is RIOT! (Version: 2023.07-devel-325-g2863d)
using I2C mode, for SPI mode select the lis2dh12_spi module
lis2dh12 [Initialized]
800161f
